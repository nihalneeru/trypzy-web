# Date Locking Funnel — Decision Memo

**Status:** Locked  
**Owner:** Trypzy Product  
**Scope:** Collaborative trip date convergence & locking  
**Last Updated:** 2026-01

---

## Context

Groups fail to lock trip dates not because overlap is hard to find, but because:
- Everyone waits for everyone else
- There is no shared understanding of when “enough” input exists
- Leaders feel social risk proposing too early
- Formal voting creates fear of commitment and friction

Trypzy’s philosophy is to **reduce coordination friction without removing human agency**.

This memo defines the canonical design for how collaborative trips converge on dates.

---

## Goals

1. Allow uncertainty early without stalling progress
2. Prevent premature or socially awkward proposals
3. Preserve leader authority while protecting them
4. Avoid cognitive overload or “process-y” feeling
5. Ensure deterministic, testable, enforceable behavior
6. Remain extensible for AI assistance later

---

## Non-Goals

- Perfect optimization of schedules
- Automatic decision-making by the system
- Forcing full participation
- Calendar inference or availability scraping
- Eliminating human judgment

---

## High-Level Model

### User-Facing Phases (3)

```
COLLECTING → PROPOSED → LOCKED
```

Users only ever see and reason about these three states.

---

### Internal System Invariant (1)

```ts
trip.proposalReady: boolean   // computed, not user-facing
```

This flag is **never shown directly**, but is critical for:
- gating proposals
- freezing inputs
- debugging
- future AI suggestions

---

## Core Objects

### Date Windows
- Explicitly proposed by users
- Start date + end date (ISO, day precision)
- Never inferred or auto-generated by the system
- Can be reacted to with support signals

### Support Signals
- Binary “works for me” (non-binding)
- Per-user per-window
- Expresses availability, not commitment

### Date Proposal
- One concrete date range proposed by the leader
- Freezes window collection
- Accepts reactions / concerns
- Can be updated or withdrawn by leader

---

## Proposal Readiness Logic (Deterministic)

The system computes whether it is socially safe for the leader to propose dates.

### Definitions
- `totalTravelers`: active trip members
- `responders`: users who reacted to any window
- `leaderWindow`: window with the highest support count

### Rules

```ts
function computeProposalReady(trip, windows, supports): boolean {
  const total = totalTravelers
  const responders = respondersCount
  const leaderCount = leaderWindow.supportCount

  if (total <= 10) {
    // Small groups
    return leaderCount > total / 2
  } else {
    // Large groups
    return (
      leaderCount >= Math.ceil(responders / 2) &&
      leaderCount >= 5
    )
  }
}
```

### Leader Override

Leaders may explicitly override gating when:
- they have offline context
- time pressure exists
- social dynamics demand it

This is an **escape hatch**, not the default path.

---

## State Transitions

| From       | To         | Trigger                         | Guardrail                          |
|------------|------------|----------------------------------|------------------------------------|
| COLLECTING | PROPOSED   | Leader proposes window           | proposalReady OR leaderOverride    |
| PROPOSED   | COLLECTING | Leader withdraws proposal        | Always allowed                     |
| PROPOSED   | LOCKED     | Leader locks dates               | Proposal already validated         |

---

## Enforcement Rules

### COLLECTING
- Anyone may propose windows
- Anyone may support windows
- System surfaces overlap passively
- Proposal CTA gated by `proposalReady`

### PROPOSED
- No new windows allowed
- Windows become read-only
- Travelers may react or flag concerns
- Leader may adjust or lock

### LOCKED
- Dates final
- Scheduling funnel closed
- Trip moves forward (itinerary, lodging, etc.)

---

## UX Principles

- Casual language (“could work”)
- No ranked voting
- No forced participation
- Silence is allowed
- Chat surfaces progress, not pressure
- System suggests readiness; humans decide

---

## Why This Works

| Property | How It’s Achieved |
|--------|-------------------|
| Smoothness | Only 3 visible phases |
| Trust | System never decides |
| Momentum | Clear readiness threshold |
| Leader safety | Gated proposal + override |
| Testability | Deterministic rules |
| Extensibility | proposalReady hook |

---

## Summary

This design treats **date locking as a social convergence problem**, not a calendar problem.

It allows uncertainty early, clarity later, and commitment only when humans choose it.

This is the canonical model for Trypzy.
